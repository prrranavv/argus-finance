<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1000">
<!-- Database Schema ER Diagram -->
<text x="10" y="30" font-family="Arial" font-size="16" font-weight="bold">Argus Finance - Database Schema (PostgreSQL)</text>

<!-- Users Table -->
<rect x="50" y="60" width="250" height="200" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="8"/>
<text x="175" y="85" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold">users</text>
<line x1="50" y1="95" x2="300" y2="95" stroke="#1976d2" stroke-width="1"/>
<text x="60" y="115" font-family="Arial" font-size="11">ğŸ”‘ id: string (PK)</text>
<text x="60" y="135" font-family="Arial" font-size="11">ğŸ“§ email: string</text>
<text x="60" y="155" font-family="Arial" font-size="11">ğŸ‘¤ full_name: string</text>
<text x="60" y="175" font-family="Arial" font-size="11">ğŸ–¼ï¸ avatar_url: string</text>
<text x="60" y="195" font-family="Arial" font-size="11">â° created_at: timestamp</text>
<text x="60" y="215" font-family="Arial" font-size="11">ğŸ”„ updated_at: timestamp</text>
<text x="60" y="235" font-family="Arial" font-size="11">âš™ï¸ preferences: json</text>

<!-- Statements Table -->
<rect x="400" y="60" width="280" height="240" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" rx="8"/>
<text x="540" y="85" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold">statements</text>
<line x1="400" y1="95" x2="680" y2="95" stroke="#7b1fa2" stroke-width="1"/>
<text x="410" y="115" font-family="Arial" font-size="11">ğŸ”‘ id: string (PK)</text>
<text x="410" y="135" font-family="Arial" font-size="11">ğŸ“ file_name: string</text>
<text x="410" y="155" font-family="Arial" font-size="11">ğŸ“„ file_type: string</text>
<text x="410" y="175" font-family="Arial" font-size="11">ğŸ“ file_size: number</text>
<text x="410" y="195" font-family="Arial" font-size="11">ğŸ” file_hash: string</text>
<text x="410" y="215" font-family="Arial" font-size="11">ğŸŒ file_url: string</text>
<text x="410" y="235" font-family="Arial" font-size="11">âœ… processed: boolean</text>
<text x="410" y="255" font-family="Arial" font-size="11">ğŸ“¤ uploaded_at: timestamp</text>
<text x="410" y="275" font-family="Arial" font-size="11">ğŸ”— user_id: string (FK)</text>

<!-- All Transactions Table -->
<rect x="50" y="350" width="320" height="420" fill="#e8f5e8" stroke="#2e7d32" stroke-width="2" rx="8"/>
<text x="210" y="375" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold">all_transactions</text>
<line x1="50" y1="385" x2="370" y2="385" stroke="#2e7d32" stroke-width="1"/>
<text x="60" y="405" font-family="Arial" font-size="11">ğŸ”‘ id: string (PK)</text>
<text x="60" y="425" font-family="Arial" font-size="11">ğŸ“… date: date</text>
<text x="60" y="445" font-family="Arial" font-size="11">ğŸ“ description: string</text>
<text x="60" y="465" font-family="Arial" font-size="11">ğŸ’° amount: number</text>
<text x="60" y="485" font-family="Arial" font-size="11">ğŸ·ï¸ category: string</text>
<text x="60" y="505" font-family="Arial" font-size="11">ğŸ”„ type: string (income/expense)</text>
<text x="60" y="525" font-family="Arial" font-size="11">ğŸ“ source: string (statement/gmail/manual)</text>
<text x="60" y="545" font-family="Arial" font-size="11">ğŸ¦ account_type: string</text>
<text x="60" y="565" font-family="Arial" font-size="11">ğŸ¢ bank_name: string</text>
<text x="60" y="585" font-family="Arial" font-size="11">ğŸ’³ closing_balance: number</text>
<text x="60" y="605" font-family="Arial" font-size="11">ğŸ’µ opening_balance: number</text>
<text x="60" y="625" font-family="Arial" font-size="11">ğŸ”¢ running_balance: number</text>
<text x="60" y="645" font-family="Arial" font-size="11">ğŸ“Š credit_limit: number</text>
<text x="60" y="665" font-family="Arial" font-size="11">ğŸ“† due_date: date</text>
<text x="60" y="685" font-family="Arial" font-size="11">â­ reward_points: number</text>
<text x="60" y="705" font-family="Arial" font-size="11">ğŸ›’ merchant_category: string</text>
<text x="60" y="725" font-family="Arial" font-size="11">ğŸ’¸ mode: string</text>
<text x="60" y="745" font-family="Arial" font-size="11">ğŸ”— user_id: string (FK)</text>

<!-- Balances Table -->
<rect x="450" y="350" width="280" height="300" fill="#fff3e0" stroke="#ef6c00" stroke-width="2" rx="8"/>
<text x="590" y="375" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold">balances</text>
<line x1="450" y1="385" x2="730" y2="385" stroke="#ef6c00" stroke-width="1"/>
<text x="460" y="405" font-family="Arial" font-size="11">ğŸ”‘ id: string (PK)</text>
<text x="460" y="425" font-family="Arial" font-size="11">ğŸ“… last_expense_date: date</text>
<text x="460" y="445" font-family="Arial" font-size="11">ğŸ¦ account_type: string</text>
<text x="460" y="465" font-family="Arial" font-size="11">ğŸ¢ bank_name: string</text>
<text x="460" y="485" font-family="Arial" font-size="11">ğŸ’° closing_balance: number</text>
<text x="460" y="505" font-family="Arial" font-size="11">ğŸ“Š credit_limit: number</text>
<text x="460" y="525" font-family="Arial" font-size="11">ğŸ“† due_date: date</text>
<text x="460" y="545" font-family="Arial" font-size="11">â­ reward_points: number</text>
<text x="460" y="565" font-family="Arial" font-size="11">ğŸ“„ statement_id: string (FK)</text>
<text x="460" y="585" font-family="Arial" font-size="11">ğŸ“… statement_month: string</text>
<text x="460" y="605" font-family="Arial" font-size="11">ğŸ”— last_transaction_id: string (FK)</text>
<text x="460" y="625" font-family="Arial" font-size="11">ğŸ”— user_id: string (FK)</text>

<!-- Emails Table -->
<rect x="800" y="350" width="280" height="260" fill="#fce4ec" stroke="#c2185b" stroke-width="2" rx="8"/>
<text x="940" y="375" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold">emails</text>
<line x1="800" y1="385" x2="1080" y2="385" stroke="#c2185b" stroke-width="1"/>
<text x="810" y="405" font-family="Arial" font-size="11">ğŸ”‘ id: string (PK)</text>
<text x="810" y="425" font-family="Arial" font-size="11">ğŸ“§ gmail_message_id: string</text>
<text x="810" y="445" font-family="Arial" font-size="11">ğŸ“¨ from_email: string</text>
<text x="810" y="465" font-family="Arial" font-size="11">ğŸ“‹ subject: string</text>
<text x="810" y="485" font-family="Arial" font-size="11">ğŸ“… received_date: timestamp</text>
<text x="810" y="505" font-family="Arial" font-size="11">ğŸ“ attachment_urls: string[]</text>
<text x="810" y="525" font-family="Arial" font-size="11">ğŸ¦ account_type: string</text>
<text x="810" y="545" font-family="Arial" font-size="11">ğŸ¢ bank_name: string</text>
<text x="810" y="565" font-family="Arial" font-size="11">ğŸ“„ content: text</text>
<text x="810" y="585" font-family="Arial" font-size="11">ğŸ”— user_id: string (FK)</text>

<!-- Relationship Lines -->
<defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
            refX="10" refY="3.5" orient="auto">
        <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
</defs>

<!-- Users to Statements (1:many) -->
<line x1="300" y1="160" x2="400" y2="160" stroke="#333" stroke-width="2"/>
<circle cx="300" cy="160" r="3" fill="#333"/>
<text x="320" y="150" font-family="Arial" font-size="10">1:N</text>

<!-- Users to Transactions (1:many) -->
<line x1="175" y1="260" x2="175" y2="350" stroke="#333" stroke-width="2"/>
<circle cx="175" cy="260" r="3" fill="#333"/>
<text x="180" y="300" font-family="Arial" font-size="10">1:N</text>

<!-- Users to Balances (1:many) -->
<line x1="300" y1="200" x2="450" y2="450" stroke="#333" stroke-width="2"/>
<circle cx="300" cy="200" r="3" fill="#333"/>
<text x="360" y="320" font-family="Arial" font-size="10">1:N</text>

<!-- Users to Emails (1:many) -->
<line x1="300" y1="120" x2="800" y2="480" stroke="#333" stroke-width="2"/>
<circle cx="300" cy="120" r="3" fill="#333"/>
<text x="520" y="280" font-family="Arial" font-size="10">1:N</text>

<!-- Statements to Transactions (1:many) -->
<line x1="540" y1="300" x2="370" y2="500" stroke="#333" stroke-width="2"/>
<circle cx="540" cy="300" r="3" fill="#333"/>
<text x="440" y="380" font-family="Arial" font-size="10">1:N</text>

<!-- Statements to Balances (1:many) -->
<line x1="590" y1="300" x2="590" y2="350" stroke="#333" stroke-width="2"/>
<circle cx="590" cy="300" r="3" fill="#333"/>
<text x="595" y="320" font-family="Arial" font-size="10">1:N</text>

<!-- Key Features Box -->
<rect x="800" y="60" width="500" height="250" fill="#f1f8e9" stroke="#689f38" stroke-width="2" rx="8"/>
<text x="1050" y="85" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold">Database Features</text>
<line x1="800" y1="95" x2="1300" y2="95" stroke="#689f38" stroke-width="1"/>
<text x="820" y="120" font-family="Arial" font-size="12">ğŸ”’ <tspan font-weight="bold">Row Level Security (RLS)</tspan> - Users can only access their own data</text>
<text x="820" y="145" font-family="Arial" font-size="12">ğŸ”„ <tspan font-weight="bold">Real-time Subscriptions</tspan> - Live updates on data changes</text>
<text x="820" y="170" font-family="Arial" font-size="12">ğŸ“Š <tspan font-weight="bold">Multi-tenancy</tspan> - Every table has user_id for isolation</text>
<text x="820" y="195" font-family="Arial" font-size="12">ğŸš€ <tspan font-weight="bold">Performance</tspan> - Indexed queries, optimized for large datasets</text>
<text x="820" y="220" font-family="Arial" font-size="12">ğŸ” <tspan font-weight="bold">Full-text Search</tspan> - Search transactions by description</text>
<text x="820" y="245" font-family="Arial" font-size="12">ğŸ” <tspan font-weight="bold">JWT Authentication</tspan> - Secure token-based auth</text>
<text x="820" y="270" font-family="Arial" font-size="12">ğŸ’¾ <tspan font-weight="bold">ACID Compliance</tspan> - Reliable transactions</text>

<text x="50" y="850" font-family="Arial" font-size="12" fill="#666">
Primary Keys (PK) â€¢ Foreign Keys (FK) â€¢ One-to-Many Relationships â€¢ Row Level Security Enabled
</text>
</svg> 