<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1000">
<!-- AI Processing Pipeline -->
<text x="10" y="30" font-family="Arial" font-size="16" font-weight="bold">AI Processing Pipeline - OpenAI-Powered Transaction Extraction</text>

<!-- Start -->
<circle cx="120" cy="80" r="30" fill="#4caf50" stroke="#2e7d32" stroke-width="3"/>
<text x="120" y="88" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">START</text>
<text x="120" y="120" text-anchor="middle" font-family="Arial" font-size="11">File Upload</text>

<!-- Extract Text Content -->
<rect x="60" y="160" width="120" height="60" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="8"/>
<text x="120" y="185" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">Extract Text Content</text>
<text x="120" y="205" text-anchor="middle" font-family="Arial" font-size="11">File processor</text>

<!-- File Type Decision -->
<polygon points="280,160 350,190 280,220 210,190" fill="#fff3e0" stroke="#ef6c00" stroke-width="2"/>
<text x="280" y="195" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">File Type?</text>

<!-- CSV Processing -->
<rect x="400" y="100" width="140" height="50" fill="#e8f5e8" stroke="#2e7d32" stroke-width="2" rx="5"/>
<text x="470" y="120" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">CSV Processing</text>
<text x="470" y="135" text-anchor="middle" font-family="Arial" font-size="10">Direct Text Processing</text>

<!-- PDF Processing -->
<rect x="400" y="170" width="140" height="50" fill="#fce4ec" stroke="#c2185b" stroke-width="2" rx="5"/>
<text x="470" y="190" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">PDF Processing</text>
<text x="470" y="205" text-anchor="middle" font-family="Arial" font-size="10">PDF Reader Library</text>

<!-- Excel Processing -->
<rect x="400" y="240" width="140" height="50" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" rx="5"/>
<text x="470" y="260" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">Excel Processing</text>
<text x="470" y="275" text-anchor="middle" font-family="Arial" font-size="10">XLSX Library</text>

<!-- Filter Transaction Lines -->
<rect x="600" y="160" width="140" height="60" fill="#fff3e0" stroke="#ef6c00" stroke-width="2" rx="8"/>
<text x="670" y="180" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">Filter Transaction Lines</text>
<text x="670" y="195" text-anchor="middle" font-family="Arial" font-size="10">• Contains dates</text>
<text x="670" y="210" text-anchor="middle" font-family="Arial" font-size="10">• Contains amounts</text>

<!-- Limit Content Size -->
<rect x="800" y="160" width="140" height="60" fill="#f1f8e9" stroke="#689f38" stroke-width="2" rx="8"/>
<text x="870" y="180" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">Limit Content Size</text>
<text x="870" y="195" text-anchor="middle" font-family="Arial" font-size="10">Max 15,000 characters</text>
<text x="870" y="210" text-anchor="middle" font-family="Arial" font-size="10">for API efficiency</text>

<!-- OpenAI API Call -->
<rect x="1000" y="160" width="140" height="60" fill="#ffebee" stroke="#f44336" stroke-width="2" rx="8"/>
<text x="1070" y="180" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">OpenAI API Call</text>
<text x="1070" y="195" text-anchor="middle" font-family="Arial" font-size="10">GPT-4 Processing</text>

<!-- OpenAI Processing Details -->
<rect x="200" y="320" width="1000" height="300" fill="#f5f5f5" stroke="#757575" stroke-width="2" rx="10"/>
<text x="700" y="350" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold">OpenAI Processing Details</text>

<!-- System Prompt -->
<rect x="220" y="380" width="200" height="100" fill="#e8eaf6" stroke="#3f51b5" stroke-width="2" rx="5"/>
<text x="320" y="405" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">System Prompt</text>
<text x="320" y="425" text-anchor="middle" font-family="Arial" font-size="11">TRANSACTION_EXTRACTION</text>
<text x="230" y="445" font-family="Arial" font-size="10">• Extract transaction data</text>
<text x="230" y="460" font-family="Arial" font-size="10">• Identify bank/card type</text>
<text x="230" y="475" font-family="Arial" font-size="10">• Categorize transactions</text>

<!-- User Prompt -->
<rect x="450" y="380" width="160" height="100" fill="#e0f2f1" stroke="#00695c" stroke-width="2" rx="5"/>
<text x="530" y="405" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">User Prompt</text>
<text x="530" y="425" text-anchor="middle" font-family="Arial" font-size="11">Financial statement content</text>
<text x="530" y="445" text-anchor="middle" font-family="Arial" font-size="10">Filtered & processed text</text>

<!-- Structured Output -->
<rect x="640" y="380" width="160" height="100" fill="#fff3e0" stroke="#ef6c00" stroke-width="2" rx="5"/>
<text x="720" y="405" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">Structured Output</text>
<text x="720" y="425" text-anchor="middle" font-family="Arial" font-size="11">Zod Schema Validation</text>
<text x="720" y="445" text-anchor="middle" font-family="Arial" font-size="10">Type-safe parsing</text>

<!-- JSON Response -->
<rect x="830" y="380" width="200" height="100" fill="#e8f5e8" stroke="#2e7d32" stroke-width="2" rx="5"/>
<text x="930" y="405" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">JSON Response</text>
<text x="930" y="425" text-anchor="middle" font-family="Arial" font-size="11">transactions array with</text>
<text x="840" y="445" font-family="Arial" font-size="10">date, description, amount,</text>
<text x="840" y="460" font-family="Arial" font-size="10">type, category, bankName,</text>
<text x="840" y="475" font-family="Arial" font-size="10">accountType, etc.</text>

<!-- Bank/Card Detection -->
<rect x="50" y="380" width="140" height="100" fill="#fce4ec" stroke="#c2185b" stroke-width="2" rx="5"/>
<text x="120" y="405" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">Bank/Card Detection</text>
<text x="120" y="425" text-anchor="middle" font-family="Arial" font-size="11">AI Logic:</text>
<text x="60" y="445" font-family="Arial" font-size="10">• HDFC patterns</text>
<text x="60" y="460" font-family="Arial" font-size="10">• Axis patterns</text>
<text x="60" y="475" font-family="Arial" font-size="10">• Card-specific keywords</text>

<!-- Category Classification -->
<rect x="1070" y="380" width="140" height="100" fill="#f1f8e9" stroke="#689f38" stroke-width="2" rx="5"/>
<text x="1140" y="405" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">Category Classification</text>
<text x="1140" y="425" text-anchor="middle" font-family="Arial" font-size="11">AI Logic:</text>
<text x="1080" y="445" font-family="Arial" font-size="10">• Grocery → Food</text>
<text x="1080" y="460" font-family="Arial" font-size="10">• Amazon → Shopping</text>
<text x="1080" y="475" font-family="Arial" font-size="10">• Uber → Transport</text>

<!-- Validation -->
<rect x="300" y="660" width="140" height="60" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="8"/>
<text x="370" y="680" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">Validate Response</text>
<text x="370" y="695" text-anchor="middle" font-family="Arial" font-size="10">Check required fields</text>
<text x="370" y="710" text-anchor="middle" font-family="Arial" font-size="10">Parse dates, validate amounts</text>

<!-- Decision Diamond -->
<polygon points="550,660 600,690 550,720 500,690" fill="#fff3e0" stroke="#ef6c00" stroke-width="2"/>
<text x="550" y="695" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">Valid?</text>

<!-- Success Path -->
<rect x="700" y="660" width="140" height="60" fill="#e8f5e8" stroke="#2e7d32" stroke-width="2" rx="8"/>
<text x="770" y="680" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">Return Processed Data</text>
<text x="770" y="695" text-anchor="middle" font-family="Arial" font-size="10">Structured transactions</text>

<!-- Error Path -->
<rect x="480" y="760" width="140" height="60" fill="#ffebee" stroke="#f44336" stroke-width="2" rx="8"/>
<text x="550" y="780" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">Throw Processing Error</text>
<text x="550" y="795" text-anchor="middle" font-family="Arial" font-size="10">Invalid response</text>

<!-- Database Save -->
<rect x="900" y="660" width="140" height="60" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" rx="8"/>
<text x="970" y="680" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">Save to Database</text>
<text x="970" y="695" text-anchor="middle" font-family="Arial" font-size="10">Bulk insert with</text>
<text x="970" y="710" text-anchor="middle" font-family="Arial" font-size="10">duplicate checking</text>

<!-- Arrows -->
<defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
            refX="10" refY="3.5" orient="auto">
        <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
</defs>

<!-- Main flow arrows -->
<line x1="120" y1="130" x2="120" y2="160" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
<line x1="180" y1="190" x2="210" y2="190" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

<!-- File type decision arrows -->
<line x1="350" y1="170" x2="400" y2="125" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
<text x="360" y="140" font-family="Arial" font-size="10">CSV</text>

<line x1="350" y1="190" x2="400" y2="195" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
<text x="360" y="200" font-family="Arial" font-size="10">PDF</text>

<line x1="350" y1="210" x2="400" y2="265" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
<text x="360" y="245" font-family="Arial" font-size="10">Excel</text>

<!-- Converge to filter -->
<line x1="540" y1="125" x2="600" y2="180" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
<line x1="540" y1="195" x2="600" y2="190" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
<line x1="540" y1="265" x2="600" y2="200" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

<!-- Continue main flow -->
<line x1="740" y1="190" x2="800" y2="190" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
<line x1="940" y1="190" x2="1000" y2="190" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

<!-- Down to OpenAI processing -->
<line x1="1070" y1="220" x2="1070" y2="280" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
<line x1="1070" y1="280" x2="320" y2="280" stroke="#333" stroke-width="2"/>
<line x1="320" y1="280" x2="320" y2="380" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

<!-- OpenAI internal flow -->
<line x1="420" y1="430" x2="450" y2="430" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
<line x1="610" y1="430" x2="640" y2="430" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
<line x1="800" y1="430" x2="830" y2="430" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

<!-- Down to validation -->
<line x1="930" y1="480" x2="930" y2="560" stroke="#333" stroke-width="2"/>
<line x1="930" y1="560" x2="370" y2="560" stroke="#333" stroke-width="2"/>
<line x1="370" y1="560" x2="370" y2="660" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

<!-- Validation to decision -->
<line x1="440" y1="690" x2="500" y2="690" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

<!-- Decision paths -->
<line x1="600" y1="690" x2="700" y2="690" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
<text x="630" y="685" font-family="Arial" font-size="10">Yes</text>

<line x1="550" y1="720" x2="550" y2="760" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
<text x="555" y="740" font-family="Arial" font-size="10">No</text>

<!-- Success to database -->
<line x1="840" y1="690" x2="900" y2="690" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

<!-- Supporting connections -->
<line x1="120" y1="380" x2="220" y2="400" stroke="#333" stroke-width="1" stroke-dasharray="3,3"/>
<line x1="1030" y1="430" x2="1070" y2="400" stroke="#333" stroke-width="1" stroke-dasharray="3,3"/>

<!-- Example Box -->
<rect x="50" y="850" width="1200" height="120" fill="#f8f9fa" stroke="#6c757d" stroke-width="1" rx="5"/>
<text x="650" y="875" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold">Example Processing</text>

<text x="70" y="900" font-family="Arial" font-size="12" font-weight="bold">Input CSV:</text>
<text x="70" y="920" font-family="Arial" font-size="11">2024-11-15,AMAZON MARKETPLACE,2499.00,Debit</text>

<text x="500" y="900" font-family="Arial" font-size="12" font-weight="bold">AI Output:</text>
<text x="500" y="920" font-family="Arial" font-size="11">{date: '2024-11-15', description: 'Amazon Marketplace', amount: 2499.00,</text>
<text x="500" y="935" font-family="Arial" font-size="11">type: 'expense', category: 'Shopping', bankName: 'HDFC Diners'}</text>

<text x="70" y="955" font-family="Arial" font-size="11">Smart categorization • Clean merchant names • Bank detection • Type classification</text>

<text x="50" y="990" font-family="Arial" font-size="12" fill="#666">
OpenAI GPT-4 • Zod Schema Validation • Multi-format Support • Smart Categorization • Duplicate Prevention
</text>
</svg> 